# Phase 1: 要件定義・基本設計ワークフロー

## 🎯 フェーズ概要
**目的**: ユーザー要求を構造化し、実装可能な基本設計まで完成させる
**担当**: リーダーエージェント ↔ ユーザー
**完了条件**: ユーザー承認済み基本設計書の作成

## 📋 開発フロー設定
**GitHub Flow採用**: 
- **mainブランチ**: 本番環境対応の安定ブランチ
- **機能開発**: feature/issue-{番号}-{機能名} ブランチで実行
- **開発フロー**: PR作成→レビュー→mainブランチマージ
- **並列開発**: git worktreeによる並列開発環境構築
- **統合方針**: 逐次PR作成・依存関係考慮マージ

---

## 📋 実行チェックリスト

### **Step 1-1: 要求整理・要件定義** 👤➡️🤖
```yaml
トリガー: ユーザーの新規プロジェクト開始
実行者: リーダーエージェント (Claude Code)

🚨 CRITICAL ACTIONS:
  1. ユーザー要求を自然言語で受取り
  2. 要件を整理・構造化
  3. 要件定義書ドラフト作成
  4. ユーザーとの対話で要件精緻化
  5. 最終要件定義書確定

✅ 完了判定:
  - 要件定義書作成済み (.ai/knowledge_base/01_requirements/)
  - ユーザー確認・承認済み

🔄 次ステップ:
  - ユーザーから「基本設計を開始してください」指示を待つ
```

### **Step 1-2: 基本設計・テスト戦略策定** 🤖➡️👤
```yaml
トリガー: ユーザーの基本設計開始指示
実行者: リーダーエージェント → ユーザーレビュー

🚨 CRITICAL ACTIONS:
  1. 技術スタック選定
  2. システムアーキテクチャ設計
  3. データベース設計
  4. API仕様設計
  5. TDD戦略策定
  6. 単体テスト設計方針策定
  7. ユーザーレビュー・承認取得

test_strategy_design:
  tdd_strategy:
    - テスト駆動開発戦略の策定
    - 単体テスト設計方針
    - テストファースト原則の定義
    - テストカバレッジ基準設定
  
  unit_test_guidelines:
    - 機能別単体テスト方針
    - API仕様に基づくテスト設計
    - 異常系・境界値テスト方針
    - モック・スタブ利用方針

✅ 完了判定:
  - システム設計書作成済み
  - API仕様書 (OpenAPI) 作成済み
  - データベーススキーマ作成済み
  - 技術選定理由書作成済み
  - TDD実装ガイドライン作成済み
  - 単体テスト設計方針書作成済み
  - ユーザー承認済み

🔄 次ステップ:
  - 「Phase 1完了。Phase 2へ移行準備完了」をユーザーに報告
  - workflow_phase_2_task_breakdown.md の読み込み指示をユーザーに依頼
```

---

## 🎯 重要な制約・注意事項

### **リーダーエージェントの役割制限**
- **Phase 1では実装は行わない**
- **設計・要件定義・戦略策定のみ**
- **実装に関する質問は「Phase 3で実装エージェントが担当します」と回答**

### **フェーズ移行ルール**
- **Phase 1完了後、必ずユーザー確認を取る**
- **自動的に次フェーズに進まない**
- **ユーザーから「Phase 2に進んでください」指示を待つ**

---

## 🔗 関連ドキュメント
- **次フェーズ**: workflow_phase_2_task_breakdown.md
- **エージェント通信**: 08_practical_agent_communication_system.md (Phase 3以降で必要) 